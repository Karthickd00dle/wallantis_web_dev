"use strict";(self.webpackChunkwallantics=self.webpackChunkwallantics||[]).push([[7596],{28868:(e,s,a)=>{a.d(s,{VX:()=>i,gV:()=>o,lx:()=>t,xS:()=>r});var l=a(24618);const r=e=>(s,a,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,a)=>{t({...l.iJ.registationApi,body:e}).then((e=>{s(e)})).catch((e=>{let{message:s}=e;a(o({type:"error",message:s}))}))}))},t=e=>(s,a,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,a)=>{t({...l.iJ.loginApi,body:e}).then((e=>{let{response:a}=e;sessionStorage.setItem("authToken",a.access_token),s(a)})).catch((e=>{let{message:s}=e;a(o({type:"error",message:s}))}))}))},o=e=>(s,a,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,a)=>{t({...l.iJ.verifyOTP,body:e}).then((e=>{s(e),o({type:"success",message:e.message})})).catch((e=>{let{message:s}=e;a(o({type:"error",message:s}))}))}))},i=e=>(s,a,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,a)=>{t({...l.iJ.resendOTP,body:e}).then((e=>{s(e),o({type:"success",message:e.message})})).catch((e=>{let{message:s}=e;a(o({type:"error",message:s}))}))}))}},67596:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var l=a(72791),r=a(45214),t=a(30456),o=a(63695),i=a(61134),n=a(64880),c=a(59050),m=a(78687),p=a(28868),d=a(10272),u=a(80184);const g=(0,m.$j)(((e,s)=>({ownProps:s})),(e=>(0,c.DE)({verifyOTPApiCall:p.gV},e)))((function(e){let{verifyOTPApiCall:s,ownProps:a}=e;const{register:l,handleSubmit:t,formState:{errors:n}}=(0,i.cI)(),{currentEmail:c}=a;return console.log(c,"oww"),(0,u.jsx)("form",{onSubmit:t((e=>{let a={emailId:c,otp:e.otp,password:e.password};s(a).then((()=>{d.m.push("/auth/login")}))})),children:(0,u.jsxs)("div",{className:"post-register-container",children:[(0,u.jsx)(o.t7,{type:"email",name:"email",variant:"standard",placeholder:"Enter Email/Mobile number",className:"input-mobile-email",register:l,errors:n,defaultValue:c}),(0,u.jsxs)("div",{className:"otp-resend-container d-flex justify-content-between my-4",children:[(0,u.jsx)("label",{className:"label-otp-sent",children:" OTP sent to Mobile"}),(0,u.jsx)("label",{className:"label-resend pe-1",children:"Resend? "})]}),(0,u.jsx)(o.t7,{type:"number",placeholder:"Enter OTP",name:"otp",className:"input-otp my-3",register:l,errors:n}),(0,u.jsx)(o.t7,{type:"password",placeholder:"Set Password",className:"input-password my-3",name:"password",register:l,errors:n}),(0,u.jsxs)("div",{className:"d-flex flex-column",children:[(0,u.jsx)(r.op,{style:{backgroundColor:"#A26220",color:" #FFFFFF"},className:"py-2 mb-3",children:"Verify OTP"}),(0,u.jsx)(r.op,{style:{color:"#2A71F9",borderRadius:"5px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.15)"},className:"py-2 mt-3",onClick:()=>d.m.push("/auth/login"),children:"Existing User? Log in"})]})]})})}));var h=a(55872);const x=(0,m.$j)(((e,s)=>({ownProps:s})),(e=>(0,c.DE)({registationApiCall:p.xS,verifyOTPApiCall:p.gV,loginApiCall:p.lx},e)))((e=>{let{loginApiCall:s,registationApiCall:a}=e;const c=(0,n.k6)(),[m,p]=(0,l.useState)(),[d,x]=(0,l.useState)(""),{register:y,handleSubmit:b,formState:{errors:j}}=(0,i.cI)();return(0,u.jsx)(u.Fragment,{children:m?(0,u.jsx)(g,{currentEmail:d}):(0,u.jsx)("div",{className:"d-flex register-container",children:(0,u.jsxs)("form",{onSubmit:b((e=>{let s={emailId:e.email,loginType:3};a(s).then((s=>{p(!0),x(e.email)})).catch((e=>{console.log(e)}))})),children:[(0,u.jsx)(o.t7,{name:"email",variant:"standard",placeholder:"Enter Email/Mobile number",className:"input-mobile-email",register:y,errors:j}),(0,u.jsx)("label",{className:"label-privacy-policy ",children:"By continuing, you agree to Paperwall Terms of use and Privacy policy"}),(0,u.jsxs)("div",{className:"d-flex flex-column",children:[(0,u.jsx)(r.op,{style:{backgroundColor:"#A26220",color:" #FFFFFF"},className:"py-2 mb-3",type:"submit",children:"Continue"}),(0,u.jsx)("div",{className:"my-2 ",children:(0,u.jsx)(h.kZ,{text:"signup_with",onSuccess:e=>{(e=>{const l=(0,t.Z)(e.credential),r=l.given_name.split(" ");let o={firstName:r[0],lastName:r[1],emailId:l.email,image:l.picture,roleType:"home_owner",socialId:l.sub,loginType:2};a(o).then((()=>s({username:l.sub,loginType:2}).then((e=>{let{response:s}=e,a=s.access_token;sessionStorage.setItem("authToken",a),c.push("/home/")})))).catch((e=>{console.log(e)}))})(e)},onError:()=>{console.log("Login Failed")}})}),(0,u.jsx)(r.op,{style:{color:"#2A71F9",borderRadius:"5px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.15)"},className:"py-2 mt-3",onClick:()=>c.push("/auth/login"),children:"Existing User? Log in"})]})]})})})}))}}]);
//# sourceMappingURL=7596.4b6193e8.chunk.js.map