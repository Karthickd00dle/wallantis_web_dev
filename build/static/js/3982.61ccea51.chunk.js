"use strict";(self.webpackChunkwallantics=self.webpackChunkwallantics||[]).push([[3982],{28868:(e,s,l)=>{l.d(s,{gV:()=>o,lx:()=>t,xS:()=>r});var a=l(24618);const r=e=>(s,l,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,l)=>{t({...a.iJ.registationApi,body:e}).then((e=>{s(e)})).catch((e=>{let{message:s}=e;l(o({type:"error",message:s}))}))}))},t=e=>(s,l,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,l)=>{t({...a.iJ.loginApi,body:e}).then((e=>{localStorage.setItem("authToken",e),s(e)})).catch((e=>{let{message:s}=e;l(o({type:"error",message:s}))}))}))},o=e=>(s,l,r)=>{let{apiCall:t,Toast:o}=r;return new Promise(((s,l)=>{t({...a.iJ.verifyOTP,body:e}).then((e=>{s(e),o({type:"error",message:e.message})})).catch((e=>{let{message:s}=e;l(o({type:"error",message:s}))}))}))}},63982:(e,s,l)=>{l.r(s),l.d(s,{default:()=>x});var a=l(72791),r=l(96933),t=l(30456),o=l(60908),i=l(61134),n=l(64880),c=l(6598),m=l(78687),p=l(28868),d=(l(56543),l(10272)),u=l(80184);const g=(0,m.$j)(((e,s)=>({ownProps:s})),(e=>(0,c.DE)({verifyOTPApiCall:p.gV},e)))((function(e){let{verifyOTPApiCall:s,currentEmail:l}=e;const{register:a,handleSubmit:t,formState:{errors:n}}=(0,i.cI)();return(0,u.jsx)("form",{onSubmit:t((e=>{let a={emailId:l,otp:e.otp,password:e.password};s(a).then((()=>{d.m.push("/auth/login")}))})),children:(0,u.jsxs)("div",{className:"post-register-container",children:[(0,u.jsxs)("div",{className:"otp-resend-container d-flex justify-content-between my-4",children:[(0,u.jsx)("label",{className:"label-otp-sent",children:" OTP sent to Mobile"}),(0,u.jsx)("label",{className:"label-resend pe-1",children:"Resend? "})]}),(0,u.jsx)(o.t7,{type:"number",placeholder:"Enter OTP",name:"otp",className:"input-otp my-3",register:a,errors:n}),(0,u.jsx)(o.t7,{type:"password",placeholder:"Set Password",className:"input-password my-3",name:"password",register:a,errors:n}),(0,u.jsxs)("div",{className:"d-flex flex-column",children:[(0,u.jsx)(r.op,{style:{backgroundColor:"#A26220",color:" #FFFFFF"},className:"py-2 mb-3",children:"Verify OTP"}),(0,u.jsx)(r.op,{style:{color:"#2A71F9",borderRadius:"5px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.15)"},className:"py-2 mt-3",onClick:()=>d.m.push("/auth/login"),children:"Existing User? Log in"})]})]})})}));var h=l(55872);const x=(0,m.$j)(((e,s)=>({ownProps:s})),(e=>(0,c.DE)({registationApiCall:p.xS,verifyOTPApiCall:p.gV,loginApiCall:p.lx},e)))((e=>{let{loginApiCall:s,registationApiCall:l}=e;const c=(0,n.k6)(),[m,p]=(0,a.useState)(),[d,x]=(0,a.useState)(""),{register:y,handleSubmit:b,formState:{errors:j}}=(0,i.cI)();return(0,u.jsx)(u.Fragment,{children:m?(0,u.jsx)(g,{currentEmail:d}):(0,u.jsx)("div",{className:"d-flex register-container",children:(0,u.jsxs)("form",{onSubmit:b((e=>{let s={emailId:e.email,loginType:3};l(s).then((s=>{p(!0),x(e.email)})).catch((e=>{console.log(e)}))})),children:[(0,u.jsx)(o.t7,{type:"email",name:"email",variant:"standard",placeholder:"Enter Email/Mobile number",className:"input-mobile-email",register:y,errors:j}),(0,u.jsx)("label",{className:"label-privacy-policy ",children:"By continuing, you agree to Paperwall Terms of use and Privacy policy"}),(0,u.jsxs)("div",{className:"d-flex flex-column",children:[(0,u.jsx)(r.op,{style:{backgroundColor:"#A26220",color:" #FFFFFF"},className:"py-2 mb-3",type:"submit",children:"Continue"}),(0,u.jsx)("div",{className:"my-2 ",children:(0,u.jsx)(h.kZ,{text:"signup_with",onSuccess:e=>{(e=>{const a=(0,t.Z)(e.credential),r=a.given_name.split(" ");let o={firstName:r[0],lastName:r[1],emailId:a.email,image:a.picture,roleType:"home_owner",socialId:a.sub,loginType:2};l(o).then((()=>s({username:a.sub,loginType:2}).then((e=>{let{response:s}=e,l=s.access_token;sessionStorage.setItem("authToken",l),c.push("/home/")})))).catch((e=>{console.log(e)}))})(e)},onError:()=>{console.log("Login Failed")}})}),(0,u.jsx)(r.op,{style:{color:"#2A71F9",borderRadius:"5px",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.15)"},className:"py-2 mt-3",onClick:()=>c.push("/auth/login"),children:"Existing User? Log in"})]})]})})})}))}}]);
//# sourceMappingURL=3982.61ccea51.chunk.js.map